"use strict";(self["webpackChunksocial_vue_3"]=self["webpackChunksocial_vue_3"]||[]).push([[4376],{1995:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var o=a(641),s=a(3751),r=a(33),t=a(953),c=a(98);const i={class:"row justify-content-center"},u={class:"col-md-10"},n={class:"card iq-border-radius-40"},v={class:"card-body"},d={class:"form-group row"},m={class:"col-sm-10"},f=["value"],k={class:"form-group row"},p={class:"col-sm-10"},L={key:0},b={class:"form-group row"},y={class:"col-sm-10"},h={class:"form-group row"},w={class:"col-sm-10"},g={key:1},C={class:"form-group row"},R={class:"col-sm-10"},x={key:2},E={class:"form-group row"},K={class:"col-sm-10"},_={key:3},X={key:4,class:"form-group row"},V={class:"col-sm-10"},q={class:"notification-message"};var U={__name:"VerifyArticle",setup(e){const{web3:l,socialContract:a}=(0,c.A)(),U=(0,t.KR)(""),J=(0,t.KR)(""),S=(0,t.KR)(""),T=(0,t.KR)(""),j=(0,t.KR)(!1),A=(0,t.KR)(""),H=(0,t.KR)(""),Q=(0,t.KR)(""),F=(0,t.KR)([{id:1,name:"用戶文章",value:"article"},{id:2,name:"驗證請求",value:"verify"},{id:3,name:"文章證據",value:"evidence"},{id:4,name:"查驗哈希",value:"showHash"}]),I=(0,t.KR)(1),B=async()=>{j.value=!1;try{const a=await l.eth.getTransaction(U.value);if(!a)throw new Error("交易無效");const o=a.input;let s;try{s=l.eth.abi.decodeParameters(["uint256","string","uint256"],o.slice(10))}catch(e){throw new Error("解碼失敗，請檢查輸入資料")}console.log(s),1===I.value?T.value=S.value===s[1]&&H.value===String(s[2])?"驗證成功! 文章與區塊鏈紀錄一致!":"文章標題或內容不符合":2===I.value?T.value=Q.value===s[1]&&H.value===String(s[2])?"驗證成功! 文章與區塊鏈紀錄一致!":"驗證請求內容或發文時間不符合":3===I.value?T.value=H.value===s[1]&&Q.value===String(s[2])?"驗證成功! 文章與區塊鏈紀錄一致!":"內文或發文時間不符合":T.value="鏈上id:"+s[0]+"\n內文:"+s[1]+"\n發文時間:"+s[2],A.value="驗證成功! 文章與區塊鏈紀錄一致!"===T.value?"notification-success":"notification-error",4===I.value&&(A.value="notification-success")}catch(e){T.value=e.message||"驗證失敗，請檢查輸入的資料。",A.value="notification-error",console.error(e)}j.value=!0};return(e,l)=>((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",u,[(0,o.Lk)("div",n,[(0,o.Lk)("div",v,[l[15]||(l[15]=(0,o.Lk)("div",{class:"row"},[(0,o.Lk)("div",{class:"col-md-10 mb-3"},[(0,o.Lk)("h5",{class:"text-primary card-title d-flex gap-1"},[(0,o.Lk)("span",{class:"material-symbols-outlined"},"verified"),(0,o.eW)(" 文章查驗 ")])])],-1)),(0,o.Lk)("form",{class:"email-form justify-content-center",onSubmit:(0,s.D$)(B,["prevent"])},[(0,o.Lk)("div",d,[l[7]||(l[7]=(0,o.Lk)("label",{for:"type",class:"col-sm-2 col-form-label"},"驗證種類",-1)),(0,o.Lk)("div",m,[(0,o.bo)((0,o.Lk)("select",{class:"form-control","onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e)},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(F.value,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:e.id},(0,r.v_)(e.name),9,f)))),128))],512),[[s.u1,I.value]])])]),(0,o.Lk)("div",k,[l[8]||(l[8]=(0,o.Lk)("label",{for:"transactionHash",class:"col-sm-2 col-form-label"},"交易哈希",-1)),(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"transactionHash","onUpdate:modelValue":l[1]||(l[1]=e=>U.value=e),class:"form-control",placeholder:"輸入交易哈希",required:""},null,512),[[s.Jo,U.value]])])]),1===I.value?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",b,[l[9]||(l[9]=(0,o.Lk)("label",{for:"articleTitle",class:"col-sm-2 col-form-label"},"文章標題",-1)),(0,o.Lk)("div",y,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"articleTitle","onUpdate:modelValue":l[2]||(l[2]=e=>J.value=e),class:"form-control",placeholder:"輸入文章標題",required:""},null,512),[[s.Jo,J.value]])])]),(0,o.Lk)("div",h,[l[10]||(l[10]=(0,o.Lk)("label",{for:"articleContent",class:"col-sm-2 col-form-label"},"文章內容",-1)),(0,o.Lk)("div",w,[(0,o.bo)((0,o.Lk)("textarea",{id:"articleContent","onUpdate:modelValue":l[3]||(l[3]=e=>S.value=e),class:"form-control",rows:"5",placeholder:"輸入文章內容",required:""},null,512),[[s.Jo,S.value]])])])])):2===I.value?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",C,[l[11]||(l[11]=(0,o.Lk)("label",{for:"verifyReason",class:"col-sm-2 col-form-label"},"驗證理由",-1)),(0,o.Lk)("div",R,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"verifyReason","onUpdate:modelValue":l[4]||(l[4]=e=>Q.value=e),class:"form-control",placeholder:"輸入驗證理由",required:""},null,512),[[s.Jo,Q.value]])])])])):3===I.value?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",E,[l[12]||(l[12]=(0,o.Lk)("label",{for:"verifyReason",class:"col-sm-2 col-form-label"},"內文",-1)),(0,o.Lk)("div",K,[(0,o.bo)((0,o.Lk)("textarea",{type:"text",id:"verifyReason","onUpdate:modelValue":l[5]||(l[5]=e=>Q.value=e),class:"form-control",placeholder:"輸入內容",required:""},null,512),[[s.Jo,Q.value]])])])])):4===I.value?((0,o.uX)(),(0,o.CE)("div",_)):(0,o.Q3)("",!0),4!==I.value?((0,o.uX)(),(0,o.CE)("div",X,[l[13]||(l[13]=(0,o.Lk)("label",{for:"articleContent",class:"col-sm-2 col-form-label"},"發文時間",-1)),(0,o.Lk)("div",V,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"postTime","onUpdate:modelValue":l[6]||(l[6]=e=>H.value=e),class:"form-control",placeholder:"發布時間",required:""},null,512),[[s.Jo,H.value]])])])):(0,o.Q3)("",!0),l[14]||(l[14]=(0,o.Lk)("div",{class:"form-group d-flex justify-content-center"},[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary"},"驗證文章")],-1))],32),(0,o.bF)(s.eB,{name:"fade",class:"notificationClass"},{default:(0,o.k6)((()=>[j.value?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([A.value,"notification-box"])},[(0,o.Lk)("span",q,(0,r.v_)(T.value),1)],2)):(0,o.Q3)("",!0)])),_:1})])])])]))}},J=a(6262);const S=(0,J.A)(U,[["__scopeId","data-v-7fc92c9f"]]);var T=S}}]);
//# sourceMappingURL=4376.4417d063.js.map