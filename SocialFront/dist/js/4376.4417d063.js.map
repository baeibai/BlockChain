{"version":3,"file":"js/4376.4417d063.js","mappings":"4yBA+GA,MAAM,KAAEA,EAAI,eAAEC,IAAmBC,EAAAA,EAAAA,KAQ3BC,GAAkBC,EAAAA,EAAAA,IAAI,IACtBC,GAAeD,EAAAA,EAAAA,IAAI,IACnBE,GAAiBF,EAAAA,EAAAA,IAAI,IACrBG,GAAqBH,EAAAA,EAAAA,IAAI,IACzBI,GAAmBJ,EAAAA,EAAAA,KAAI,GACvBK,GAAoBL,EAAAA,EAAAA,IAAI,IACxBM,GAAcN,EAAAA,EAAAA,IAAI,IAClBO,GAAeP,EAAAA,EAAAA,IAAI,IACnBQ,GAAQR,EAAAA,EAAAA,IAAI,CAChB,CAAES,GAAI,EAAGC,KAAM,OAAQC,MAAO,WAC9B,CAAEF,GAAI,EAAGC,KAAM,OAAQC,MAAO,UAC9B,CAAEF,GAAI,EAAGC,KAAM,OAAQC,MAAO,YAC9B,CAAEF,GAAI,EAAGC,KAAM,OAAQC,MAAO,cAE1BC,GAAOZ,EAAAA,EAAAA,IAAI,GAKXa,EAAoBC,UACxBV,EAAiBO,OAAQ,EACzB,IACE,MAAMI,QAAoBnB,EAAKoB,IAAIC,eAAelB,EAAgBY,OAClE,IAAKI,EACH,MAAM,IAAIG,MAAM,QAElB,MAAMC,EAAYJ,EAAYK,MAE9B,IAAIC,EAEJ,IACEA,EAAUzB,EAAKoB,IAAIM,IAAIC,iBAAiB,CAAC,UAAW,SAAU,WAAYJ,EAAUK,MAAM,IAC5F,CAAE,MAAOC,GACP,MAAM,IAAIP,MAAM,eAClB,CACAQ,QAAQC,IAAIN,GAOO,IAAfT,EAAKD,MAEPR,EAAmBQ,MAAST,EAAeS,QAAUU,EAAQ,IAAMf,EAAYK,QAAUiB,OAAOP,EAAQ,IACpG,oBACA,aACoB,IAAfT,EAAKD,MAEdR,EAAmBQ,MAASJ,EAAaI,QAAUU,EAAQ,IAAMf,EAAYK,QAAUiB,OAAOP,EAAQ,IAClG,oBACA,iBACmB,IAAfT,EAAKD,MAEbR,EAAmBQ,MAASL,EAAYK,QAAUU,EAAQ,IAAMd,EAAaI,QAAUiB,OAAOP,EAAQ,IAClG,oBACA,aAGJlB,EAAmBQ,MAAQ,QAAUU,EAAQ,GAAK,QAAUA,EAAQ,GAAK,UAAWA,EAAQ,GAI9FhB,EAAkBM,MAAqC,sBAA7BR,EAAmBQ,MAAgC,uBAAyB,qBACpF,IAAfC,EAAKD,QACNN,EAAkBM,MAAQ,uBAE9B,CAAE,MAAOc,GAEPtB,EAAmBQ,MAAQc,EAAMI,SAAW,iBAC5CxB,EAAkBM,MAAQ,qBAC1Be,QAAQD,MAAMA,EAChB,CACArB,EAAiBO,OAAQ,CAAI,E,o1GC1L/B,MAAMmB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://social-vue-3/./src/views/Verify/VerifyArticle.vue","webpack://social-vue-3/./src/views/Verify/VerifyArticle.vue?411b"],"sourcesContent":["<template>\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-10\">\r\n      <div class=\"card iq-border-radius-40\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-10 mb-3\">\r\n              <h5 class=\"text-primary card-title d-flex gap-1\">\r\n                <span class=\"material-symbols-outlined\">verified</span>\r\n                文章查驗\r\n              </h5>\r\n            </div>\r\n          </div>\r\n          <form class=\"email-form justify-content-center\" @submit.prevent=\"verifyTransaction\">\r\n            <div class=\"form-group row\">\r\n              <label for=\"type\" class=\"col-sm-2 col-form-label\">驗證種類</label>\r\n              <div class=\"col-sm-10\">\r\n\r\n                <select class=\"form-control\" v-model=\"type\">\r\n                  <!-- <option value=\"請選擇看板\">請選擇看板</option> -->\r\n                  <option :value=\"type.id\" v-for=\"type in types\" :key=\"type.id\">{{ type.name }}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <!-- 交易哈希輸入欄 -->\r\n            <div class=\"form-group row\">\r\n              <label for=\"transactionHash\" class=\"col-sm-2 col-form-label\">交易哈希</label>\r\n              <div class=\"col-sm-10\">\r\n                <input type=\"text\" id=\"transactionHash\" v-model=\"transactionHash\" class=\"form-control\"\r\n                  placeholder=\"輸入交易哈希\" required />\r\n              </div>\r\n            </div>\r\n            <div v-if=\"type === 1\">\r\n              <!-- 文章標題輸入欄 -->\r\n              <div class=\"form-group row\">\r\n                <label for=\"articleTitle\" class=\"col-sm-2 col-form-label\">文章標題</label>\r\n                <div class=\"col-sm-10\">\r\n                  <input type=\"text\" id=\"articleTitle\" v-model=\"articleTitle\" class=\"form-control\" placeholder=\"輸入文章標題\"\r\n                    required />\r\n                </div>\r\n              </div>\r\n              <!-- 文章內容輸入欄 -->\r\n              <div class=\"form-group row\">\r\n                <label for=\"articleContent\" class=\"col-sm-2 col-form-label\">文章內容</label>\r\n                <div class=\"col-sm-10\">\r\n                  <textarea id=\"articleContent\" v-model=\"articleContent\" class=\"form-control\" rows=\"5\"\r\n                    placeholder=\"輸入文章內容\" required></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"type === 2\">\r\n              <!-- 驗證請求內容輸入欄 -->\r\n              <div class=\"form-group row\">\r\n                <label for=\"verifyReason\" class=\"col-sm-2 col-form-label\">驗證理由</label>\r\n                <div class=\"col-sm-10\">\r\n                  <input type=\"text\" id=\"verifyReason\" v-model=\"verifyReason\" class=\"form-control\" placeholder=\"輸入驗證理由\"\r\n                    required />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"type === 3\">\r\n              <!-- 驗證請求內容輸入欄 -->\r\n              <div class=\"form-group row\">\r\n                <label for=\"verifyReason\" class=\"col-sm-2 col-form-label\">內文</label>\r\n                <div class=\"col-sm-10\">\r\n                  <textarea type=\"text\" id=\"verifyReason\" v-model=\"verifyReason\" class=\"form-control\" placeholder=\"輸入內容\"\r\n                    required />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"type === 4\">\r\n\r\n            </div>\r\n\r\n\r\n            <!-- 發布時間 -->\r\n            <div v-if=\"type !== 4\" class=\"form-group row\">\r\n              <label for=\"articleContent\" class=\"col-sm-2 col-form-label\">發文時間</label>\r\n              <div class=\"col-sm-10\">\r\n                <input type=\"text\" id=\"postTime\" v-model=\"articleTime\" class=\"form-control\" placeholder=\"發布時間\"\r\n                  required />\r\n              </div>\r\n            </div>\r\n            <!-- 驗證按鈕 -->\r\n            <div class=\"form-group d-flex justify-content-center\">\r\n              <button type=\"submit\" class=\"btn btn-primary\">驗證文章</button>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- <div class=\"form-group d-flex justify-content-center\">\r\n              <button type=\"submit\" class=\"btn btn-primary\" @click=\"queryBalance\">查詢餘額</button>\r\n          </div> -->\r\n\r\n          <!-- 驗證結果通知框 -->\r\n          <transition name=\"fade\" class=\"notificationClass\">\r\n            <div v-if=\"showNotification\" :class=\"notificationClass\" class=\"notification-box\">\r\n              <span class=\"notification-message\">{{ verificationResult }}</span>\r\n            </div>\r\n          </transition>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport useWeb3 from \"@/hooks/useWeb3.js\";\r\n\r\n// 從 useWeb3 中獲取 web3 實例與合約等信息\r\nconst { web3, socialContract } = useWeb3();\r\n\r\n// const queryBalance = async () => {\r\n//   const num = await socialContract.methods.getBalance().call();\r\n//   console.log(num);\r\n// }\r\n\r\n// 定義變量\r\nconst transactionHash = ref('');\r\nconst articleTitle = ref('');\r\nconst articleContent = ref('');\r\nconst verificationResult = ref('');\r\nconst showNotification = ref(false);\r\nconst notificationClass = ref('');\r\nconst articleTime = ref('');\r\nconst verifyReason = ref('');\r\nconst types = ref([\r\n  { id: 1, name: \"用戶文章\", value: \"article\" },\r\n  { id: 2, name: \"驗證請求\", value: \"verify\" },\r\n  { id: 3, name: \"文章證據\", value: \"evidence\" },\r\n  { id: 4, name: \"查驗哈希\", value: \"showHash\" }\r\n]);\r\nconst type = ref(1);\r\n\r\n\r\n\r\n// 驗證交易函數\r\nconst verifyTransaction = async () => {\r\n  showNotification.value = false; // 驗證開始時隱藏通知框\r\n  try {\r\n    const transaction = await web3.eth.getTransaction(transactionHash.value);\r\n    if (!transaction) {\r\n      throw new Error('交易無效');\r\n    }\r\n    const inputData = transaction.input;\r\n\r\n    let decoded;\r\n    // 解碼區分不同的驗證種類\r\n    try {\r\n      decoded = web3.eth.abi.decodeParameters(['uint256', 'string', 'uint256'], inputData.slice(10));\r\n    } catch (error) {\r\n      throw new Error('解碼失敗，請檢查輸入資料');\r\n    }\r\n    console.log(decoded);\r\n    // if (type.value === 1) {\r\n    //   // 文章查驗邏輯\r\n    //   verificationResult.value = (articleTitle.value === decoded[1] && articleContent.value === decoded[2] && articleTime.value === String(decoded[3]))\r\n    //     ? '驗證成功! 文章與區塊鏈紀錄一致!'\r\n    //     : '文章標題或內容不符合';\r\n    // } \r\n    if (type.value === 1) {\r\n      // 文章查驗邏輯\r\n      verificationResult.value = (articleContent.value === decoded[1] && articleTime.value === String(decoded[2]))\r\n        ? '驗證成功! 文章與區塊鏈紀錄一致!'\r\n        : '文章標題或內容不符合';\r\n    } else if (type.value === 2) {\r\n      // 驗證請求查驗邏輯\r\n      verificationResult.value = (verifyReason.value === decoded[1] && articleTime.value === String(decoded[2]))\r\n        ? '驗證成功! 文章與區塊鏈紀錄一致!'\r\n        : '驗證請求內容或發文時間不符合';\r\n    } else if(type.value === 3) {\r\n      // 其他查驗邏輯\r\n      verificationResult.value = (articleTime.value === decoded[1] && verifyReason.value === String(decoded[2]))\r\n        ? '驗證成功! 文章與區塊鏈紀錄一致!'\r\n        : '內文或發文時間不符合';\r\n    }\r\n    else {\r\n      verificationResult.value = \"鏈上id:\" + decoded[0] + \"\\n內文:\" + decoded[1] + \"\\n發文時間:\"+ decoded[2];\r\n    }\r\n\r\n    // 根據驗證結果設定通知樣式\r\n    notificationClass.value = verificationResult.value === '驗證成功! 文章與區塊鏈紀錄一致!' ? 'notification-success' : 'notification-error';\r\n    if(type.value === 4) {\r\n      notificationClass.value = \"notification-success\";\r\n    }\r\n  } catch (error) {\r\n    // 驗證失敗\r\n    verificationResult.value = error.message || '驗證失敗，請檢查輸入的資料。';\r\n    notificationClass.value = 'notification-error';\r\n    console.error(error);\r\n  }\r\n  showNotification.value = true; // 顯示通知框\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 通知框的過渡效果 */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n/* 修改通知框的樣式，讓其居中並不會太高 */\r\n.notification-box {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  /* 調整到屏幕底部 20px */\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  /* 水平居中 */\r\n  padding: 15px 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  font-size: 16px;\r\n  color: white;\r\n  z-index: 1000;\r\n  opacity: 0.9;\r\n  /* 增加一些透明度 */\r\n}\r\n\r\n/* 驗證成功的樣式 */\r\n.notification-success {\r\n  background-color: #28a745;\r\n  animation: slideIn 0.5s ease forwards;\r\n}\r\n\r\n/* 驗證失敗的樣式 */\r\n.notification-error {\r\n  background-color: #dc3545;\r\n  animation: slideIn 0.5s ease forwards;\r\n}\r\n\r\n.notification-message {\r\n  white-space: pre-line; /* 允許換行 */\r\n}\r\n\r\n/* 通知框的進場動畫 */\r\n@keyframes slideIn {\r\n  0% {\r\n    transform: translateX(-50%) translateY(100%);\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    transform: translateX(-50%) translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./VerifyArticle.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./VerifyArticle.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./VerifyArticle.vue?vue&type=style&index=0&id=7fc92c9f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7fc92c9f\"]])\n\nexport default __exports__"],"names":["web3","socialContract","useWeb3","transactionHash","ref","articleTitle","articleContent","verificationResult","showNotification","notificationClass","articleTime","verifyReason","types","id","name","value","type","verifyTransaction","async","transaction","eth","getTransaction","Error","inputData","input","decoded","abi","decodeParameters","slice","error","console","log","String","message","__exports__"],"sourceRoot":""}