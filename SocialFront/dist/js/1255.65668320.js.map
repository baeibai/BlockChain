{"version":3,"file":"js/1255.65668320.js","mappings":"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","sources":["webpack://social-vue-3/./src/views/Apps/Social/Components/SocialPostChinInfo.vue","webpack://social-vue-3/./src/views/Apps/Social/Components/SocialPostChinInfo.vue?4fa3","webpack://social-vue-3/./src/views/Apps/Social/Components/MyArticles.vue","webpack://social-vue-3/./src/views/Apps/Social/Components/MyArticles.vue?541d"],"sourcesContent":["<template>\r\n    <div v-if=\"show\" class=\"modal fade show d-block\" tabindex=\"-1\" role=\"dialog\"\r\n        style=\"background: rgba(0, 0, 0, 0.5);\">\r\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">鏈上資訊</h5>\r\n                    <button type=\"button\" class=\"close\" aria-label=\"Close\" @click=\"$emit('close')\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <p><strong>交易序號：</strong> {{ chainInfo.transactionHash }}</p>\r\n                    <p><strong>發文者地址：</strong> {{ chainInfo.authorAddress }}</p>\r\n                    <!-- <p><strong>交易手續費：</strong> {{ chainInfo.transactionFee }}</p> -->\r\n                    <p><strong>智慧合約位址：</strong> {{ chainInfo.smartContractAddress }}</p>\r\n                    <p><strong>文章標題：</strong> {{ chainInfo.title }}</p>\r\n                    <p><strong>交易時間：</strong> {{ chainInfo.timestamp }}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps } from 'vue';\r\n\r\nconst props = defineProps(['chainInfo']);\r\nconst show = ref(true); // 控制彈出視窗的顯示與隱藏\r\n</script>\r\n\r\n<style scoped>\r\n/* 根據需要新增自訂樣式 */\r\n.modal-dialog {\r\n    max-width: 600px;\r\n}\r\n\r\n.modal-content {\r\n    padding: 20px;\r\n}\r\n</style>","import script from \"./SocialPostChinInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SocialPostChinInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SocialPostChinInfo.vue?vue&type=style&index=0&id=6e208906&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6e208906\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"col-sm-12\" v-for=\"(post, index) in posts\" :key=\"index\">\r\n        <div class=\"card card-block card-stretch card-height\">\r\n            <div class=\"card-body\">\r\n                <div class=\"user-post-data\">\r\n                    <h3 class=\"m-2\">{{ post.title }}</h3>\r\n                    <div class=\"d-flex justify-content-between\">\r\n                        <router-link :to=\"{ name: 'social.profile2', params: { userId: post.authorId } }\">\r\n                            <img class=\"rounded-circle img-fluid fixed-size-img me-5\"\r\n                                :src=\"'data:image/png;base64,' + post.avatar\" alt=\"\">\r\n                        </router-link>\r\n                        <div class=\"w-100\">\r\n                            <div class=\"d-flex justify-content-between align-items-center\">\r\n                                <div class=\"col-7\">\r\n                                    <div class=\"d-flex align-items-center\">\r\n                                        <router-link\r\n                                            :to=\"{ name: 'social.profile2', params: { userId: post.authorId } }\">\r\n                                            <h4 class=\"mb-0 d-inline-block me-2\">{{ post.authorName }}</h4>\r\n                                        </router-link>\r\n                                        <span class=\"mb-0 text-primary\">{{ formatDate(post.publicationDate) }}</span>\r\n                                    </div>\r\n                                    <p class=\"mb-0 text-muted\" @click=\"handlerClickBoard(post.boardName)\">\r\n                                        {{ post.boardName }}\r\n                                    </p>\r\n                                </div>\r\n                                <div class=\"d-flex justify-content-end align-items-center\">\r\n                                    <!-- 上鏈按鈕 -->\r\n                                    <div class=\"me-2\" v-if=\"post.chained\">\r\n                                        <span class=\"material-symbols-outlined chain-info-highlight\" role=\"button\" title=\"鏈上資訊\"\r\n                                            @click=\"showPopups(post.id)\"\r\n                                            style=\"font-size: 32px; line-height: 1.5; vertical-align: middle;\">\r\n                                            dataset_linked\r\n                                        </span>\r\n                                        <ChainInfo :chainInfo=\"chainInfo\" v-if=\"showPopup\"\r\n                                            @close=\"() => showPopup = false\"></ChainInfo>\r\n                                    </div>\r\n\r\n\r\n                                    <!-- 發起上鏈按鈕 -->\r\n                                    <div class=\"me-2\" v-if=\"!post.chained\">\r\n                                        <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                                            @click=\"handleChin(post)\">上鏈</button>\r\n                                    </div>\r\n\r\n                                    <!-- 檢查分數按鈕 -->\r\n                                    <div class=\"me-2\">\r\n                                        <button @click=\"handleAIVerify(post.id)\" class=\"btn btn-primary\"\r\n                                            style=\"white-space: nowrap;\">AI分析</button>\r\n                                        <AIVerify v-if=\"post.id === selectedArticleId && showAIVerify\"\r\n                                            :title=\"post.title\" :content=\"post.content\" @close=\"handleClose\"></AIVerify>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"mt-3\">\r\n                    <p>{{ post.content }}</p>\r\n                </div>\r\n                <div class=\"user-post\">\r\n                    <div :class=\"{ 'row': post.images.length > 1 }\">\r\n                        <div v-for=\"(pic, picIndex) in post.images\" :key=\"picIndex\"\r\n                            :class=\"getImageClass(post.images.length)\">\r\n                            <img :src=\"'data:image/png;base64,' + pic\" alt=\"post-image\" class=\"img-fluid rounded\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"blog-meta d-flex align-items-center mt-3 mb-3 flex-wrap\">\r\n                    <div class=\"me-4 d-flex align-items-center\" >\r\n                        <i class=\"material-symbols-outlined pe-2 md-18 text-primary\"\r\n                            :class=\"{ 'custom-color': post.liked }\">\r\n                            arrow_circle_up\r\n                        </i>{{ post.likeCount }} 支持者\r\n                    </div>\r\n                    <div class=\"me-4 d-flex align-items-center\" >\r\n                        <i class=\"material-symbols-outlined pe-2 md-18 text-primary\"\r\n                            :class=\"{ 'custom-color': post.disliked }\">\r\n                            arrow_circle_down\r\n                        </i>{{ post.dislikeCount }} 不支持者\r\n                    </div>\r\n                    <div @click=\"openComment(post.id)\" class=\"comments me-4 d-flex align-items-center\">\r\n                        <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                            mode_comment\r\n                        </i>\r\n                        {{ post.commentCount }} 評論數\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <SocialVerify v-if=\"showVerify\" @close=\"showVerify = false\" @verify=\"verify\" :articleId=\"selectedArticleId\"\r\n        :articleTitle=\"selectedArticleTitle\" />\r\n    <div v-if=\"isLoading\" class=\"loading-spinner\">\r\n        加載中...\r\n    </div>\r\n\r\n    <Notification v-if=\"notificationState.show\" :message=\"notificationState.message\" :type=\"notificationState.type\"\r\n    @close=\"notificationState.show = false\" />\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, reactive, defineProps, watchEffect, onUnmounted } from 'vue';\r\nimport ChainInfo from \"./SocialPostChinInfo.vue\";\r\nimport { myArticleListApi, articleChainInfoApi, addLikeApi, addDislikeApi, recordBlockchainApi } from '@/api/article.js';\r\nimport { useStore } from 'vuex';\r\nimport { formatDate, getFromLocalStorage } from \"@/utilities/tools.js\";\r\nimport SocialVerify from \"./SocialVerify.vue\";\r\nimport AIVerify from \"@/components/ai/AIVerify.vue\";\r\nimport useWeb3 from \"@/hooks/useWeb3.js\";\r\nimport Notification from \"@/components/float/Notification.vue\";\r\n\r\nconst { web3, socialContract, getAccount, contractAddress } = useWeb3();\r\n\r\nconst store = useStore();\r\n\r\nconst props = defineProps({ boardId: Number });\r\n\r\nconst showAIVerify = ref(false);\r\nconst handleAIVerify = (id) => {\r\n    console.log(\"handleAIVerify\");\r\n    selectedArticleId.value = id;\r\n    showAIVerify.value = true;\r\n}\r\n\r\nconst handleClose = () => {\r\n    showAIVerify.value = false;\r\n};\r\n\r\n\r\nconst getImageClass = (imageCount) => {\r\n    switch (imageCount) {\r\n        case 1:\r\n            return 'col-10';  // 單張圖片佔滿整行\r\n        case 2:\r\n            return 'col-6';   // 兩張圖片各佔一半\r\n        case 3:\r\n            return 'col-4';   // 三張圖片各佔三分之一\r\n        case 4:\r\n            return 'col-6 col-md-3'; // 四張圖片佔四分之一\r\n        default:\r\n            return 'col-6 col-md-4';  // 其他情況下，每張圖片佔一定寬度\r\n    }\r\n};\r\n\r\n// 使用 reactive 封裝通知的狀態\r\nconst notificationState = reactive({\r\n  show: false,\r\n  message: '',\r\n  type: 'info'\r\n});\r\n\r\nlet data = null;\r\nconst handleChin = async (post) => {\r\n    if (!store.state.userInfo) {\r\n        notificationState.show = true;\r\n        notificationState.message = \"請先登入!\";\r\n        notificationState.type = \"warning\";\r\n        return;\r\n    }\r\n    let account = await getAccount();\r\n    if (account != store.state.userInfo?.address) {\r\n        // console.log(account, store.state.userInfo?.address)\r\n        notificationState.show = true;\r\n        notificationState.message = \"請切換metamask帳戶為您註冊時帳號!\";\r\n        notificationState.type = \"error\";\r\n        return;\r\n    }\r\n    data = {\r\n        id: \"\",\r\n        articleId: post.id,\r\n        authorAddress: account,\r\n        title: post.title,\r\n        address: store.state.userInfo?.address,\r\n        // content: post.content,\r\n        timestamp: Date.now(),\r\n        transactionHash: \"\"\r\n    }\r\n    // const res = await uploadToIPFS(data.content);\r\n    // if (res.data.code === 1) {\r\n    // console.log('Data uploaded successfully with CID:', res.data.data);\r\n    const successChain = await uploadArticleBlockchain(data.title, post.content, data.timestamp);\r\n    // console.log(\"successChain\", successChain);\r\n\r\n    const articleCount = await getArticleCount();\r\n    data.id = Number(articleCount);\r\n    console.log(\"data\", data);\r\n    if (!successChain) {\r\n        notificationState.show = true;\r\n        notificationState.message = \"上鏈失敗請重試!\";\r\n        notificationState.type.error;\r\n        return;\r\n    }\r\n    const result = await recordBlockchainApi(data);\r\n    if (result.data.code === 1) {\r\n        post.chained = true;\r\n        notificationState.message = \"上鏈成功!\";\r\n        notificationState.type = \"success\";\r\n        notificationState.show = true;\r\n    } else {\r\n        notificationState.message = \"區塊鏈記錄失敗\";\r\n        notificationState.type = 'error';\r\n        notificationState.show = true;\r\n    }\r\n}\r\n\r\n\r\nconst getArticleCount = async () => {\r\n    try {\r\n        const articleCount = await socialContract.methods.articleCount().call();\r\n        // console.log(\"文章數量:\", articleCount);\r\n        return articleCount;\r\n    } catch (error) {\r\n        console.error(\"獲取文章數量時出錯:\", error);\r\n        return null;\r\n    }\r\n};\r\n\r\nconst uploadArticleBlockchain = async (title, content, timestamp) => {\r\n    // console.log(\"uploadArticleBlockchain\", title, content, publicationDate);\r\n    const account = await getAccount();\r\n    const transactionParameters = {\r\n        from: account,\r\n        to: contractAddress,\r\n        value: \"0\",\r\n        data: socialContract.methods.publish(title, content, timestamp).encodeABI(),\r\n    };\r\n\r\n    try {\r\n        // 發送交易並獲取交易哈希\r\n        const transactionHash = await window.ethereum.request({\r\n            method: \"eth_sendTransaction\",\r\n            params: [transactionParameters],\r\n        });\r\n        data.transactionHash = transactionHash;\r\n        console.log(\"交易已提交，交易哈希:\", transactionHash);\r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"發送交易或監聽事件時出錯:\", error);\r\n        return false;\r\n    }\r\n};\r\n\r\nconst showVerify = ref(false);\r\nconst selectedArticleId = ref(null);\r\nconst selectedArticleTitle = ref(null);\r\n\r\nconst selectedId = ref(null);\r\nconst openComment = (id) => {\r\n    showComment.value = !showComment.value;\r\n    selectedId.value = id;\r\n}\r\nconst showComment = ref(false);\r\n\r\nconst showPopup = ref(false); // 控制弹出窗口的显示与隐藏\r\n\r\n// 父组件中的链上信息\r\nconst chainInfo = reactive({\r\n    transactionHash: '...',\r\n    authorAddress: '...',\r\n    // transactionFee: '...',\r\n    smartContractAddress: '...',\r\n    title: '...',\r\n    timestamp: '...'\r\n});\r\n\r\nconst showPopups = (articleId) => {\r\n    articleChainInfoApi(articleId).then((res) => {\r\n        if (res.data.code === 1) {\r\n            console.log(\"res.data\", res.data.data);\r\n            const result = res.data.data;\r\n            chainInfo.transactionHash = result.transactionHash;\r\n            // chainInfo.transactionFee = result.transactionFee;\r\n            chainInfo.smartContractAddress = process.env.VUE_APP_CONTRACT_ADDRESS;\r\n            chainInfo.title = result.title;\r\n            chainInfo.timestamp = result.timestamp;\r\n            chainInfo.authorAddress = result.authorAddress;\r\n            showPopup.value = true;\r\n        }\r\n        else {\r\n            console.log(\"error:\", res.data.msg);\r\n        }\r\n    });\r\n}\r\nconst handlerClickBoard = (name) => {\r\n    const boards = getFromLocalStorage(\"boards\");\r\n    const board = boards.find(board => board.name === name);\r\n    if (board.id) {\r\n        loadArticles(board.id);\r\n    } else {\r\n        console.error('未找到對應的看板 ID');\r\n    }\r\n}\r\n\r\nconst posts = ref([]);\r\nconst currentPage = ref(1);\r\nconst isLoading = ref(false);\r\n\r\n\r\nconst loadArticles = async (page = 1) => {\r\n    if (isLoading.value) return; // 防止多次觸發加載\r\n    isLoading.value = true;\r\n    try {\r\n        const res = await myArticleListApi(store.state.userInfo?.id, page);\r\n        if (res.data.code === 1) {\r\n            // 過濾掉重複的文章\r\n            const newPosts = res.data.data.filter(newPost => {\r\n                return !posts.value.some(existingPost => existingPost.id === newPost.id);\r\n            });\r\n            // 追加非重複的文章到 posts 中\r\n            posts.value = [...posts.value, ...newPosts];\r\n        } else {\r\n            console.log('error');\r\n        }\r\n    } catch (error) {\r\n        console.error('請求出錯:', error);\r\n    } finally {\r\n        isLoading.value = false;\r\n    }\r\n};\r\n\r\n\r\n\r\nconst handleScroll = () => {\r\n    if (isLoading.value) return; // 防止多次觸發加載\r\n\r\n    const scrollHeight = document.documentElement.scrollHeight;\r\n    const scrollTop = document.documentElement.scrollTop;\r\n    const clientHeight = document.documentElement.clientHeight;\r\n\r\n    if (scrollTop + clientHeight >= scrollHeight - 5) {\r\n        console.log('請求下一頁的文章', currentPage.value);\r\n        loadArticles(currentPage.value).then(() => {\r\n            // 只有當加載成功後才增加頁數\r\n            currentPage.value++;\r\n        });\r\n    }\r\n};\r\n\r\n\r\n\r\n// 監聽滾動事件\r\nwindow.addEventListener('scroll', handleScroll);\r\n\r\n// 移除滾動事件監聽器（當組件銷毀時）\r\nonMounted(() => {\r\n    currentPage.value = 1; // 初始化頁數為 1\r\n    loadArticles(currentPage.value);\r\n});\r\n\r\nwatchEffect(() => {\r\n    \r\n});\r\n\r\n\r\nonMounted(() => {\r\n    loadArticles(null);\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.custom-color {\r\n    color: red !important;\r\n}\r\n\r\n.img-fluid {\r\n    margin-right: 0;\r\n    margin-left: 0;\r\n}\r\n\r\n.fixed-size-img {\r\n    width: 75px;\r\n    height: 75px;\r\n    object-fit: cover;\r\n}\r\n</style>","import script from \"./MyArticles.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MyArticles.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MyArticles.vue?vue&type=style&index=0&id=c429e32a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c429e32a\"]])\n\nexport default __exports__"],"names":["show","ref","__exports__","web3","socialContract","getAccount","contractAddress","useWeb3","store","useStore","showAIVerify","handleAIVerify","id","console","log","selectedArticleId","value","handleClose","getImageClass","imageCount","notificationState","reactive","message","type","data","handleChin","async","state","userInfo","account","address","articleId","post","authorAddress","title","timestamp","Date","now","transactionHash","successChain","uploadArticleBlockchain","content","articleCount","getArticleCount","Number","error","result","recordBlockchainApi","code","chained","methods","call","transactionParameters","from","to","publish","encodeABI","window","ethereum","request","method","params","showVerify","selectedArticleTitle","selectedId","openComment","showComment","showPopup","chainInfo","smartContractAddress","showPopups","articleChainInfoApi","then","res","process","msg","handlerClickBoard","name","boards","getFromLocalStorage","board","find","loadArticles","posts","currentPage","isLoading","page","myArticleListApi","newPosts","filter","newPost","some","existingPost","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","addEventListener","onMounted","watchEffect"],"sourceRoot":""}