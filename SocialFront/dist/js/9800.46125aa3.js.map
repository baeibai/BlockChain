{"version":3,"file":"js/9800.46125aa3.js","mappings":"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","sources":["webpack://social-vue-3/./src/api/article.js","webpack://social-vue-3/./src/api/verify.js","webpack://social-vue-3/./src/api/score.js","webpack://social-vue-3/./src/components/ai/AIVerify.vue","webpack://social-vue-3/./src/components/ai/AIVerify.vue?4066","webpack://social-vue-3/./src/components/float/Notification.vue","webpack://social-vue-3/./src/components/float/Notification.vue?c583","webpack://social-vue-3/./src/views/Apps/Social/Components/SocialVerify.vue","webpack://social-vue-3/./src/views/Apps/Social/Components/SocialVerify.vue?33b9"],"sourcesContent":["import { request } from \"../utilities/request.js\";\r\n\r\nexport function articleChainListApi() {\r\n  return request({\r\n    url: `article/chainList`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport function articleChainInfoApi(id) {\r\n  return request({\r\n    url: `article/chainInfo/${id}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport function articleGetApi(id) {\r\n  return request({\r\n    url: `article/${id}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport function commentListApi(id, userId) {\r\n  return request({\r\n    url: `article/commentList/${id}`,\r\n    method: 'get',\r\n    params: {\r\n      userId: userId\r\n    }\r\n  });\r\n}\r\n\r\nexport function addCommentApi(data) {\r\n  return request({\r\n    url: `article/addComment`,\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\r\nexport function likeCommentApi(commentId, userId) {\r\n  return request({\r\n    url: `article/likeComment/${commentId}`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId\r\n    }\r\n  });\r\n}\r\n\r\n\r\nexport function addBookmarkApi(userId, articleId) {\r\n  return request({\r\n    url: `article/addBookmark`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId,\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function removeBookmarkApi(userId, articleId) {\r\n  return request({\r\n    url: `article/removeBookmark`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId,\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function addLikeApi(userId, articleId) {\r\n  return request({\r\n    url: `article/addLike`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId,\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function addDislikeApi(userId, articleId) {\r\n  return request({\r\n    url: `article/addDislike`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId,\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function removeLoveApi(userId, articleId) {\r\n  return request({\r\n    url: `article/removeLove`,\r\n    method: 'post',\r\n    params: {\r\n      userId: userId,\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function articlePortApi(data) {\r\n  return request({\r\n    'url': 'article/upload',\r\n    'method': 'post',\r\n    data,\r\n  })\r\n}\r\n\r\nexport function recordBlockchainApi(data) {\r\n  return request({\r\n    'url': 'article/recordBlockchain',\r\n    'method': 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function articleGptApi(title, content) {\r\n  console.log(\"aaa\", title + content);\r\n  return request({\r\n    'url': 'python/gpt',\r\n    'method': 'post',\r\n    params: {\r\n      title: title,\r\n      content: content\r\n    }\r\n  })\r\n}\r\n\r\nexport function myArticleListApi(userId, page = 1) {\r\n  const actualPage = page !== null ? page : 1;\r\n  let url = `/article/myList?page=${actualPage}`;\r\n  url += `&userId=${userId}`;\r\n  return request({\r\n      'url': url,\r\n      'method': 'get',\r\n  });\r\n}\r\n\r\n\r\n","import { request } from \"../utilities/request.js\";\r\n\r\nexport function verificationApi(data) {\r\n  return request({\r\n    'url': '/verification/submit',\r\n    'method': 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getArticleChainIdApi(articleId) {\r\n  return request({\r\n    url: `article/getArticleChainId`,\r\n    method: 'get',\r\n    params: {\r\n      articleId: articleId\r\n    }\r\n  });\r\n}\r\n\r\nexport function getVerificationApi(page = 1) {\r\n  // console.log(\"getVerificationApi\",page);\r\n  return request({\r\n    url: `/verification/VerificationList?page=${page}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport function getVerificationChainInfoApi(id) {\r\n  return request({\r\n    url: `/verification/getVerificationChainInfo?id=${id}`,\r\n    method: 'get',\r\n  });\r\n}","// import { request } from \"../utilities/requestAI.js\";\r\nimport axios from 'axios';\r\n\r\nexport async function getScore(data) {\r\n  try {\r\n    const url = `${process.env.VUE_APP_API_BASEURL_AI}:8000/analyze`;\r\n    const response = await axios.post(url, data);\r\n    // console.log(\"返回的分數:\", response.data.score);\r\n    // console.log(\"返回的評論:\", response.data.comment);\r\n    return response.data;  // 正確返回數據\r\n  } catch (error) {\r\n    console.error(\"Error:\", error);\r\n    return null;  // 請求失敗時返回 `null` 或其他預設值\r\n  }\r\n}\r\n\r\n\r\n\r\n","<template>\r\n    <div class=\"modal fade show d-block\" id=\"scoreModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">AI分析流程</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!-- 橫向流程展示 -->\r\n                    <div class=\"horizontal-flow\">\r\n                        <div class=\"flow-stage\" v-for=\"(stage, index) in stages\" :key=\"index\"\r\n                             :class=\"{ active: currentStage === stage.name }\">\r\n                            <div class=\"stage-icon\">\r\n                                <i :class=\"stage.icon\"></i>\r\n                            </div>\r\n                            <div class=\"stage-name\">{{ stage.label }}</div>\r\n                            <div class=\"stage-progress\" v-if=\"index < stages.length - 1\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- 最終分數和解釋 -->\r\n                    <div v-if=\"currentStage === 'complete'\" class=\"final-score\">\r\n                        <strong>最終可信度評分:</strong>\r\n                        <span class=\"score-display text-primary\">{{ score }}</span> / 100\r\n                    </div>\r\n                    <div class=\"mt-3\">\r\n                        <strong>AI分數解析:</strong>\r\n                        <p>{{ explanation }}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n\r\n\r\n<script setup>\r\nimport { ref, defineProps, onMounted, defineEmits } from 'vue';\r\nimport { getScore } from '@/api/score.js';\r\n\r\nconst props = defineProps({\r\n    id: {\r\n        type: Number,\r\n        required: true\r\n    },\r\n    title: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    content: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    isVisible: {\r\n        type: Boolean,\r\n        required: true\r\n    }\r\n});\r\n\r\nconst emit = defineEmits(['close']);\r\n\r\nconst score = ref('');\r\nconst explanation = ref('');\r\nonMounted(() => {\r\n    console.log(\"props\", props.title, props.content);\r\n    handleScore();\r\n});\r\n\r\n// const handleScore = async () => {\r\n//     // 模擬一個 API 調用來獲取分數\r\n//     // const response = { data: { code: 1, data: 85 } }; // 假設 API 返回分數為 85\r\n//     const response = await articleGptApi(props.title, props.content);\r\n//     if (response.data.code === 1) {\r\n//         score.value = response.data.data || [];\r\n//         console.log(\"score\", score.value);\r\n//     } else {\r\n//         console.log(\"Error\");\r\n//     }\r\n// };\r\n\r\n// function formattedExplanation(str) {\r\n//     // 將換行符替換為 <br> 標籤\r\n//     return this.explanation.replace(/\\n/g, '<br>');\r\n// }\r\nconst currentStage = ref('visionAI');\r\nconst stages = [\r\n    { name: 'visionAI', label: '圖片分析', icon: 'fas fa-image' }, // 圖片分析圖示\r\n    { name: 'semanticAnalysis', label: '商業司資料分析', icon: 'fas fa-chart-bar' }, // 商業分析圖示\r\n    { name: 'dataRetrieval', label: '事實查核中心', icon: 'fas fa-search' }, // 查核或檢索圖示\r\n    { name: 'evidenceFusion', label: '證據融合', icon: 'fas fa-layer-group' }, // 證據融合圖示\r\n    { name: 'scoring', label: '評分生成', icon: 'fas fa-star-half-alt' }, // 評分生成圖示\r\n    { name: 'complete', label: '完成', icon: 'fas fa-flag-checkered' } // 完成圖示\r\n];\r\n\r\n\r\n// const handleScore = async () => {\r\n//     for (const stage of stages) {\r\n//         currentStage.value = stage.name;\r\n//         await new Promise(resolve => setTimeout(resolve, 1000));\r\n//     }\r\n\r\n//     // 最終分數和解釋\r\n//     score.value = 10;\r\n//     explanation.value = \"內容荒謬：不可能招募「無AI知識」的AI總裁，月薪500萬台幣的說法過於誇張。\\n福利不合理：如「核能筆電」和「晶片隨便拿」等，完全不符合現實。\\n語氣不專業：語言輕浮，像「養過倉鼠也能應徵」等，與台積電的風格不符。\\n無可信來源：沒有提及任何官方公告或來源。\";\r\n// };\r\n\r\n\r\nconst handleScore = async () => {\r\n  const data = {\r\n    id: props.id,\r\n    content: props.title + props.content,\r\n    image_path: \"\"\r\n  };\r\n\r\n  // 遍歷每個 `stage` 並逐一等待\r\n//   for (const stage of stages) {\r\n//     currentStage.value = stage.name;\r\n//     await new Promise(resolve => setTimeout(resolve, 1000));  // 每個 `stage` 等待 1 秒\r\n//   }\r\n  let n = stages.length;\r\n  for (let i = 0; i < n-1; i++) {\r\n    currentStage.value = stages[i].name;\r\n    await new Promise(resolve => setTimeout(resolve, 1000));  // 每個 `stage` 等待 1 秒\r\n  }\r\n\r\n  // 所有 `stages` 完成後，開始獲取分數\r\n  try {\r\n    // const res = await getScore(data);\r\n    const res = await getScore(data);\r\n    currentStage.value = stages[n-1].name;\r\n    // 假設後端返回的結果包含 `score` 和 `comment` 字段\r\n    if (res) {\r\n      score.value = res.score;\r\n    //   等待 1 秒\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      explanation.value = res.comment;\r\n    } else {\r\n      score.value = 0;\r\n      explanation.value = \"\";\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error(\"Error fetching score:\", error);\r\n    score.value = 0;\r\n    explanation.value = \"無法取得評分，請稍後重試\";\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nconst closeModal = () => {\r\n    emit('close');\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.score-display {\r\n    font-size: 2em;\r\n    /* 調整分數的字體大小 */\r\n    font-weight: bold;\r\n    /* 加粗分數顯示 */\r\n}\r\n.horizontal-flow {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 20px;\r\n    gap: 10px; /* 增加或減少間距 */\r\n}\r\n\r\n.flow-stage {\r\n    flex: 1; /* 讓每個階段等寬 */\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    position: relative;\r\n    padding: 10px;\r\n    text-align: center;\r\n}\r\n\r\n.stage-progress {\r\n    width: 100%; /* 延伸至下一個階段 */\r\n    height: 2px;\r\n    background-color: #007bff;\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 50%; /* 調整連接線的起點 */\r\n    z-index: -1;\r\n    transform: translateX(-50%); /* 居中連接線 */\r\n}\r\n\r\n.flow-stage .stage-icon {\r\n    font-size: 24px;\r\n    color: #007bff;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.flow-stage .stage-name {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    color: #666;\r\n}\r\n\r\n.flow-stage.active .stage-icon {\r\n    color: #ff9800;\r\n    animation: pulse 1s infinite alternate;\r\n}\r\n\r\n.stage-progress {\r\n    width: 50px;\r\n    height: 2px;\r\n    background-color: #007bff;\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 100%;\r\n    z-index: -1;\r\n}\r\n\r\n@keyframes pulse {\r\n    from {\r\n        transform: scale(1);\r\n    }\r\n    to {\r\n        transform: scale(1.1);\r\n    }\r\n}\r\n</style>\r\n","import script from \"./AIVerify.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AIVerify.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AIVerify.vue?vue&type=style&index=0&id=2b78c26b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2b78c26b\"]])\n\nexport default __exports__","<!-- components/Notification.vue -->\r\n<template>\r\n  <div class=\"notification\" :class=\"notificationClass\">\r\n    <span>{{ message }}</span>\r\n    <!-- <button @click=\"closeNotification\" disabled=\"disabled\">關閉</button> -->\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, defineProps, defineEmits } from 'vue';\r\n\r\nconst props = defineProps({\r\n  message: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  type: {\r\n    type: String,\r\n    default: 'info',\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['close']);\r\n\r\n// 根據通知類型計算不同的 class\r\nconst notificationClass = computed(() => {\r\n  switch (props.type) {\r\n    case 'success':\r\n      return 'success';\r\n    case 'warning':\r\n      return 'warning';\r\n    case 'error':\r\n      return 'error';\r\n    default:\r\n      return 'info';\r\n  }\r\n});\r\n\r\n// 發送事件通知父組件關閉通知\r\nconst closeNotification = () => {\r\n  emit('close');\r\n};\r\n\r\n// 通知顯示後，1秒自動關閉\r\nonMounted(() => {\r\n  setTimeout(() => {\r\n    closeNotification();\r\n  }, 3000); // 1秒 = 1000 毫秒\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.notification {\r\n  border-radius: 30px; /* 圓角，形成橢圓形 */\r\n  padding: 10px 20px;  /* 調整內邊距，保持橢圓形 */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  max-width: 300px; /* 控制通知的最大寬度 */\r\n  word-wrap: break-word; /* 當訊息過長時自動換行 */\r\n\r\n  /* 使通知顯示在螢幕偏上，正中央 */\r\n  position: fixed;\r\n  top: 15%; /* 距離螢幕頂部 10% */\r\n  left: 50%; /* 水平居中 */\r\n  transform: translateX(-50%); /* 將元素的水平中心點對齊到螢幕正中央 */\r\n  z-index: 1000; /* 保證通知顯示在其他元素的上方 */\r\n}\r\n\r\n.info {\r\n  background-color: #5fa5ff; /* 更亮的藍色 */\r\n}\r\n\r\n.success {\r\n  background-color: #63ff68; /* 更亮的綠色 */\r\n}\r\n\r\n.warning {\r\n  background-color: #f0d266; /* 更亮的黃色 */\r\n}\r\n\r\n.error {\r\n  background-color: #fa7070; /* 更亮的紅色 */\r\n}\r\n\r\nbutton {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n","import script from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Notification.vue?vue&type=style&index=0&id=07b198c4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07b198c4\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"modal fade show d-block\" tabindex=\"-1\" role=\"dialog\" style=\"background: rgba(0, 0, 0, 0.5);\">\r\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">發起驗證</h5>\r\n                    <button type=\"button\" class=\"close\" aria-label=\"Close\" @click=\"close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"original-post mb-3\">\r\n                        <h2>原始文章</h2>\r\n                        <p>{{ postContent }}</p>\r\n                    </div>\r\n                    <div class=\"verification-reason mb-3\">\r\n                        <h2>驗證原因</h2>\r\n                        <textarea v-model=\"verificationReason\" placeholder=\"請輸入為什麼想要驗證此文章...\" class=\"form-control\"></textarea>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"close\">取消</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"submitVerification\">發起驗證</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <Notification v-if=\"notificationState.show\" :message=\"notificationState.message\" :type=\"notificationState.type\"\r\n    @close=\"notificationState.show = false\" />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, defineEmits, watchEffect, reactive } from 'vue';\r\nimport { verificationApi, getArticleChainIdApi } from '@/api/verify';\r\nimport { useStore } from 'vuex';\r\nconst store = useStore();\r\nimport useWeb3 from \"@/hooks/useWeb3.js\";\r\nimport Notification from \"@/components/float/Notification.vue\";\r\n\r\nconst { web3, socialContract, getAccount, contractAddress } = useWeb3();\r\n\r\nconst props = defineProps({\r\n    articleId: Number,\r\n    articleTitle: String\r\n});\r\nconst emit = defineEmits(['close', 'verify']);\r\n\r\nconst postContent = ref(''); // 根據 articleId 獲取實際的文章內容\r\nconst verificationReason = ref('');\r\n\r\n// 使用 reactive 封裝通知的狀態\r\nconst notificationState = reactive({\r\n  show: false,\r\n  message: '',\r\n  type: 'info'\r\n});\r\n\r\nconst showNotification = (message, type = 'info') => {\r\n    notificationState.show = true;\r\n    notificationState.message = message;\r\n    notificationState.type = type;\r\n}\r\n\r\n\r\nconst close = () => {\r\n    emit('close');\r\n};\r\nconst submitVerification = async () => {\r\n    if (!verificationReason.value.trim()) {\r\n        showNotification('請輸入驗證原因', 'warning');\r\n        return;\r\n    }\r\n    if(verificationReason.value.length > 100) {\r\n        showNotification('驗證原因字數超過限制!', 'warning');\r\n    }\r\n\r\n    // try {\r\n    let articleChainId = null;\r\n    const res = await getArticleChainIdApi(props.articleId);\r\n    if (res.data.code === 1) {\r\n        articleChainId = res.data.data;\r\n    }\r\n    else return;\r\n\r\n    // 確保 articleChainId 不為 null\r\n    if (articleChainId === null) {\r\n        console.error(\"Failed to fetch article chain ID\");\r\n        showNotification(\"無法獲取文章鏈接ID\", 'error');\r\n        return;\r\n    }\r\n\r\n    let data = {\r\n        id: null,\r\n        userId: store.state.userInfo.id,\r\n        articleId: props.articleId,\r\n        articleChainId: articleChainId,\r\n        reason: verificationReason.value,\r\n        transactionHash: \"\",\r\n        verificationDate: Date.now()\r\n    }\r\n\r\n    const responseChain = await verifyArticle(data);\r\n    console.log(\"responseChain\", responseChain);\r\n    if (!responseChain) {\r\n        showNotification(\"發起驗證失敗，請稍後再試!\", 'error');\r\n        return;\r\n    }\r\n    console.log(\"data\", data);\r\n    const response = await verificationApi(data);\r\n    if (response.data.code === 1) {\r\n        showNotification('驗證發起成功，恭喜獲得0.007ETH', 'success');\r\n        verificationReason.value = ''; // 清空驗證原因\r\n    } else {\r\n        showNotification('驗證發起失敗', 'success');\r\n    }\r\n\r\n\r\n    // } catch (error) {\r\n    //     console.error('發起驗證時出錯', error);\r\n    //     showNotification('發起驗證時出錯');\r\n    // }\r\n\r\n    close();\r\n};\r\n\r\nconst verifyArticle = async (data) => {\r\n    try {\r\n        console.log(\"發送驗證請求的數據:\", data);\r\n        // showNotification(web3.utils.toWei(\"0.02\", \"ether\"));\r\n        const account = await getAccount();\r\n        console.log(\"當前帳戶:\", account);\r\n\r\n        const transactionParameters = {\r\n            from: account,\r\n            to: contractAddress,\r\n            value: 0,\r\n            data: socialContract.methods.requestVerification(data.articleChainId, data.reason, data.verificationDate).encodeABI(),\r\n        };\r\n\r\n        const transactionHash = await window.ethereum.request({\r\n            method: \"eth_sendTransaction\",\r\n            params: [transactionParameters],\r\n        });\r\n\r\n        console.log(\"交易已提交，交易哈希:\", transactionHash);\r\n        data.transactionHash = transactionHash;\r\n        const verifyCount = await socialContract.methods.verificationCount().call();\r\n        data.id = Number(verifyCount);\r\n        return true;\r\n        // 等待交易被挖掘並獲取交易回執\r\n        // const receipt = await web3.eth.getTransactionReceipt(transactionHash);\r\n        // if (!receipt) {\r\n        //     console.error(\"未能獲取交易回執，交易可能尚未被挖掘\");\r\n        //     return false;\r\n        // }\r\n\r\n        // if (receipt.status) {\r\n        //     console.log(\"交易成功，交易回執:\", receipt);\r\n\r\n        //     // 遍歷交易回執中的事件日誌\r\n        //     for (const log of receipt.logs) {\r\n        //         try {\r\n        //             const decodedLog = web3.eth.abi.decodeLog(\r\n        //                 [\r\n        //                     {\r\n        //                         type: 'uint256',\r\n        //                         name: 'verifyCount',\r\n        //                         indexed: false\r\n        //                     }\r\n        //                 ],\r\n        //                 log.data,\r\n        //                 log.topics.slice(1)\r\n        //             );\r\n        //             console.log(\"驗證已發布，事件數據:\", decodedLog);\r\n        //             data.id = Number(decodedLog.verifyCount);\r\n        //             return true;\r\n        //         } catch (e) {\r\n        //             console.error(\"解析事件日誌時出錯:\", e);\r\n        //         }\r\n        //     }\r\n        // } else {\r\n        //     console.error(\"交易失敗，回執狀態為 false\");\r\n        //     return false;\r\n        // }\r\n    } catch (error) {\r\n        console.error(\"發送交易時出錯:\", error);\r\n        return false;\r\n    }\r\n};\r\n\r\n\r\nwatchEffect(() => {\r\n    if (props.articleTitle !== null) {\r\n        // 根據 articleId 獲取文章內容並設置到 postContent\r\n        postContent.value = props.articleTitle; // 這裡應該是實際的 API 調用\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.original-post h2,\r\n.verification-reason h2 {\r\n    font-size: 1.25rem;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.verification-reason textarea {\r\n    width: 100%;\r\n    height: 100px;\r\n    padding: 10px;\r\n    font-size: 1rem;\r\n}\r\n</style>\r\n","import script from \"./SocialVerify.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SocialVerify.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SocialVerify.vue?vue&type=style&index=0&id=51e68a6e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-51e68a6e\"]])\n\nexport default __exports__"],"names":["articleChainInfoApi","id","request","url","method","articleGetApi","commentListApi","userId","params","addCommentApi","data","likeCommentApi","commentId","addBookmarkApi","articleId","removeBookmarkApi","addLikeApi","addDislikeApi","removeLoveApi","articlePortApi","recordBlockchainApi","myArticleListApi","page","actualPage","verificationApi","getArticleChainIdApi","getVerificationApi","getVerificationChainInfoApi","async","getScore","response","axios","post","error","console","props","__props","emit","__emit","score","ref","explanation","onMounted","log","title","content","handleScore","currentStage","stages","name","label","icon","image_path","n","length","i","value","Promise","resolve","setTimeout","res","comment","closeModal","__exports__","notificationClass","computed","type","closeNotification","store","useStore","web3","socialContract","getAccount","contractAddress","useWeb3","postContent","verificationReason","notificationState","reactive","show","message","showNotification","close","submitVerification","trim","articleChainId","code","state","userInfo","reason","transactionHash","verificationDate","Date","now","responseChain","verifyArticle","account","transactionParameters","from","to","methods","requestVerification","encodeABI","window","ethereum","verifyCount","verificationCount","call","Number","watchEffect","articleTitle"],"sourceRoot":""}