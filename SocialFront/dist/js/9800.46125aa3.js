"use strict";(self["webpackChunksocial_vue_3"]=self["webpackChunksocial_vue_3"]||[]).push([[9800],{4754:function(e,t,a){a.d(t,{D_:function(){return u},Hj:function(){return d},Iu:function(){return v},Ry:function(){return s},UY:function(){return i},VQ:function(){return m},VY:function(){return o},ZT:function(){return l},bm:function(){return f},gO:function(){return p},gb:function(){return c},hg:function(){return h},wk:function(){return r}});var n=a(6593);function r(e){return(0,n.E)({url:`article/chainInfo/${e}`,method:"get"})}function o(e){return(0,n.E)({url:`article/${e}`,method:"get"})}function i(e,t){return(0,n.E)({url:`article/commentList/${e}`,method:"get",params:{userId:t}})}function l(e){return(0,n.E)({url:"article/addComment",method:"post",data:e})}function s(e,t){return(0,n.E)({url:`article/likeComment/${e}`,method:"post",params:{userId:t}})}function c(e,t){return(0,n.E)({url:"article/addBookmark",method:"post",params:{userId:e,articleId:t}})}function u(e,t){return(0,n.E)({url:"article/removeBookmark",method:"post",params:{userId:e,articleId:t}})}function d(e,t){return(0,n.E)({url:"article/addLike",method:"post",params:{userId:e,articleId:t}})}function m(e,t){return(0,n.E)({url:"article/addDislike",method:"post",params:{userId:e,articleId:t}})}function f(e,t){return(0,n.E)({url:"article/removeLove",method:"post",params:{userId:e,articleId:t}})}function v(e){return(0,n.E)({url:"article/upload",method:"post",data:e})}function p(e){return(0,n.E)({url:"article/recordBlockchain",method:"post",data:e})}function h(e,t=1){const a=null!==t?t:1;let r=`/article/myList?page=${a}`;return r+=`&userId=${e}`,(0,n.E)({url:r,method:"get"})}},5859:function(e,t,a){a.d(t,{M3:function(){return i},MS:function(){return r},P0:function(){return l},nw:function(){return o}});var n=a(6593);function r(e){return(0,n.E)({url:"/verification/submit",method:"post",data:e})}function o(e){return(0,n.E)({url:"article/getArticleChainId",method:"get",params:{articleId:e}})}function i(e=1){return(0,n.E)({url:`/verification/VerificationList?page=${e}`,method:"get"})}function l(e){return(0,n.E)({url:`/verification/getVerificationChainInfo?id=${e}`,method:"get"})}},8603:function(e,t,a){a.d(t,{A:function(){return I}});var n=a(641),r=a(33),o=a(953),i=a(4335);async function l(e){try{const t="http://20.198.253.42:8000/analyze",a=await i.A.post(t,e);return a.data}catch(t){return console.error("Error:",t),null}}const s={class:"modal fade show d-block",id:"scoreModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c={class:"modal-dialog modal-dialog-centered"},u={class:"modal-content"},d={class:"modal-body"},m={class:"horizontal-flow"},f={class:"stage-icon"},v={class:"stage-name"},p={key:0,class:"stage-progress"},h={key:0,class:"final-score"},g={class:"score-display text-primary"},k={class:"mt-3"};var b={__name:"AIVerify",props:{id:{type:Number,required:!0},title:{type:String,required:!0},content:{type:String,required:!0},isVisible:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const a=e,i=t,b=(0,o.KR)(""),y=(0,o.KR)("");(0,n.sV)((()=>{console.log("props",a.title,a.content),w()}));const L=(0,o.KR)("visionAI"),I=[{name:"visionAI",label:"圖片分析",icon:"fas fa-image"},{name:"semanticAnalysis",label:"商業司資料分析",icon:"fas fa-chart-bar"},{name:"dataRetrieval",label:"事實查核中心",icon:"fas fa-search"},{name:"evidenceFusion",label:"證據融合",icon:"fas fa-layer-group"},{name:"scoring",label:"評分生成",icon:"fas fa-star-half-alt"},{name:"complete",label:"完成",icon:"fas fa-flag-checkered"}],w=async()=>{const e={id:a.id,content:a.title+a.content,image_path:""};let t=I.length;for(let a=0;a<t-1;a++)L.value=I[a].name,await new Promise((e=>setTimeout(e,1e3)));try{const a=await l(e);L.value=I[t-1].name,a?(b.value=a.score,await new Promise((e=>setTimeout(e,500))),y.value=a.comment):(b.value=0,y.value="")}catch(n){console.error("Error fetching score:",n),b.value=0,y.value="無法取得評分，請稍後重試"}},C=()=>{i("close")};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",{class:"modal-header"},[t[0]||(t[0]=(0,n.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"AI分析流程",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:C,"aria-label":"Close"})]),(0,n.Lk)("div",d,[(0,n.Lk)("div",m,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(I,((e,t)=>(0,n.Lk)("div",{class:(0,r.C4)(["flow-stage",{active:L.value===e.name}]),key:t},[(0,n.Lk)("div",f,[(0,n.Lk)("i",{class:(0,r.C4)(e.icon)},null,2)]),(0,n.Lk)("div",v,(0,r.v_)(e.label),1),t<I.length-1?((0,n.uX)(),(0,n.CE)("div",p)):(0,n.Q3)("",!0)],2))),64))]),"complete"===L.value?((0,n.uX)(),(0,n.CE)("div",h,[t[1]||(t[1]=(0,n.Lk)("strong",null,"最終可信度評分:",-1)),(0,n.Lk)("span",g,(0,r.v_)(b.value),1),t[2]||(t[2]=(0,n.eW)(" / 100 "))])):(0,n.Q3)("",!0),(0,n.Lk)("div",k,[t[3]||(t[3]=(0,n.Lk)("strong",null,"AI分數解析:",-1)),(0,n.Lk)("p",null,(0,r.v_)(y.value),1)])])])])]))}},y=a(6262);const L=(0,y.A)(b,[["__scopeId","data-v-2b78c26b"]]);var I=L},3761:function(e,t,a){a.d(t,{A:function(){return s}});var n=a(641),r=a(33),o={__name:"Notification",props:{message:{type:String,required:!0},type:{type:String,default:"info"}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,i=(0,n.EW)((()=>{switch(a.type){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}})),l=()=>{o("close")};return(0,n.sV)((()=>{setTimeout((()=>{l()}),3e3)})),(t,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["notification",i.value])},[(0,n.Lk)("span",null,(0,r.v_)(e.message),1)],2))}},i=a(6262);const l=(0,i.A)(o,[["__scopeId","data-v-07b198c4"]]);var s=l},8071:function(e,t,a){a.d(t,{A:function(){return y}});var n=a(641),r=a(33),o=a(3751),i=a(953),l=a(5859),s=a(6278),c=a(98),u=a(3761);const d={class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{background:"rgba(0, 0, 0, 0.5)"}},m={class:"modal-dialog modal-dialog-centered",role:"document"},f={class:"modal-content"},v={class:"modal-body"},p={class:"original-post mb-3"},h={class:"verification-reason mb-3"};var g={__name:"SocialVerify",props:{articleId:Number,articleTitle:String},emits:["close","verify"],setup(e,{emit:t}){const a=(0,s.Pj)(),{web3:g,socialContract:k,getAccount:b,contractAddress:y}=(0,c.A)(),L=e,I=t,w=(0,i.KR)(""),C=(0,i.KR)(""),E=(0,i.Kh)({show:!1,message:"",type:"info"}),_=(e,t="info")=>{E.show=!0,E.message=e,E.type=t},A=()=>{I("close")},V=async()=>{if(!C.value.trim())return void _("請輸入驗證原因","warning");C.value.length>100&&_("驗證原因字數超過限制!","warning");let e=null;const t=await(0,l.nw)(L.articleId);if(1!==t.data.code)return;if(e=t.data.data,null===e)return console.error("Failed to fetch article chain ID"),void _("無法獲取文章鏈接ID","error");let n={id:null,userId:a.state.userInfo.id,articleId:L.articleId,articleChainId:e,reason:C.value,transactionHash:"",verificationDate:Date.now()};const r=await T(n);if(console.log("responseChain",r),!r)return void _("發起驗證失敗，請稍後再試!","error");console.log("data",n);const o=await(0,l.MS)(n);1===o.data.code?(_("驗證發起成功，恭喜獲得0.007ETH","success"),C.value=""):_("驗證發起失敗","success"),A()},T=async e=>{try{console.log("發送驗證請求的數據:",e);const t=await b();console.log("當前帳戶:",t);const a={from:t,to:y,value:0,data:k.methods.requestVerification(e.articleChainId,e.reason,e.verificationDate).encodeABI()},n=await window.ethereum.request({method:"eth_sendTransaction",params:[a]});console.log("交易已提交，交易哈希:",n),e.transactionHash=n;const r=await k.methods.verificationCount().call();return e.id=Number(r),!0}catch(t){return console.error("發送交易時出錯:",t),!1}};return(0,n.nT)((()=>{null!==L.articleTitle&&(w.value=L.articleTitle)})),(e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",d,[(0,n.Lk)("div",m,[(0,n.Lk)("div",f,[(0,n.Lk)("div",{class:"modal-header"},[t[3]||(t[3]=(0,n.Lk)("h5",{class:"modal-title"},"發起驗證",-1)),(0,n.Lk)("button",{type:"button",class:"close","aria-label":"Close",onClick:A},t[2]||(t[2]=[(0,n.Lk)("span",{"aria-hidden":"true"},"×",-1)]))]),(0,n.Lk)("div",v,[(0,n.Lk)("div",p,[t[4]||(t[4]=(0,n.Lk)("h2",null,"原始文章",-1)),(0,n.Lk)("p",null,(0,r.v_)(w.value),1)]),(0,n.Lk)("div",h,[t[5]||(t[5]=(0,n.Lk)("h2",null,"驗證原因",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),placeholder:"請輸入為什麼想要驗證此文章...",class:"form-control"},null,512),[[o.Jo,C.value]])])]),(0,n.Lk)("div",{class:"modal-footer"},[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:A},"取消"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:V},"發起驗證")])])])]),E.show?((0,n.uX)(),(0,n.Wv)(u.A,{key:0,message:E.message,type:E.type,onClose:t[1]||(t[1]=e=>E.show=!1)},null,8,["message","type"])):(0,n.Q3)("",!0)],64))}},k=a(6262);const b=(0,k.A)(g,[["__scopeId","data-v-51e68a6e"]]);var y=b}}]);
//# sourceMappingURL=9800.46125aa3.js.map