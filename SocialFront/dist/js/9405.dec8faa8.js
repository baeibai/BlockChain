"use strict";(self["webpackChunksocial_vue_3"]=self["webpackChunksocial_vue_3"]||[]).push([[9405],{4754:function(t,e,a){a.d(e,{D_:function(){return u},Hj:function(){return d},Iu:function(){return v},Ry:function(){return i},UY:function(){return o},VQ:function(){return m},VY:function(){return r},ZT:function(){return s},bm:function(){return k},gO:function(){return f},gb:function(){return c},hg:function(){return p},wk:function(){return n}});var l=a(6593);function n(t){return(0,l.E)({url:`article/chainInfo/${t}`,method:"get"})}function r(t){return(0,l.E)({url:`article/${t}`,method:"get"})}function o(t,e){return(0,l.E)({url:`article/commentList/${t}`,method:"get",params:{userId:e}})}function s(t){return(0,l.E)({url:"article/addComment",method:"post",data:t})}function i(t,e){return(0,l.E)({url:`article/likeComment/${t}`,method:"post",params:{userId:e}})}function c(t,e){return(0,l.E)({url:"article/addBookmark",method:"post",params:{userId:t,articleId:e}})}function u(t,e){return(0,l.E)({url:"article/removeBookmark",method:"post",params:{userId:t,articleId:e}})}function d(t,e){return(0,l.E)({url:"article/addLike",method:"post",params:{userId:t,articleId:e}})}function m(t,e){return(0,l.E)({url:"article/addDislike",method:"post",params:{userId:t,articleId:e}})}function k(t,e){return(0,l.E)({url:"article/removeLove",method:"post",params:{userId:t,articleId:e}})}function v(t){return(0,l.E)({url:"article/upload",method:"post",data:t})}function f(t){return(0,l.E)({url:"article/recordBlockchain",method:"post",data:t})}function p(t,e=1){const a=null!==e?e:1;let n=`/article/myList?page=${a}`;return n+=`&userId=${t}`,(0,l.E)({url:n,method:"get"})}},7409:function(t,e,a){a.d(e,{OT:function(){return s},PG:function(){return o},bZ:function(){return r},jI:function(){return n}});var l=a(6593);function n(t,e,a=1){let n=`/article/list?page=${a}`;return e&&(n+=`&boardId=${e}`),t&&(n+=`&userId=${t}`),(0,l.E)({url:n,method:"get"})}function r(){return(0,l.E)({url:"/board/list",method:"get"})}function o(t){return(0,l.E)({url:`/article/search=${t}`,method:"get"})}function s(t){return(0,l.E)({url:`/notification/userid=${t}`,method:"get"})}},5909:function(t,e,a){a.d(e,{A:function(){return A}});var l=a(641),n=a(33),r=a(953),o=a(4754),s=a(5208),i=a(6278);const c={class:"comment-area mt-3"},u={class:"post-comments list-inline p-0 m-0"},d={class:"d-flex"},m={class:"user-img"},k=["src"],v={class:"comment-data-block ms-3"},f={class:"d-flex align-items-center"},p={class:"mb-0"},L={class:"ms-2 text-muted"},g={class:"mb-0"},b=["onClick"];var y={__name:"SocialPostComment",props:{article_id:String},setup(t){const e=(0,i.Pj)(),a=t,y=(0,r.KR)([]),h=async()=>{try{const t=await(0,o.UY)(a.article_id,e.state.userInfo?.id);1===t.data.code?(y.value=t.data.data,console.log("comments:",y.value)):console.error("取得評論列表失敗:",t.data.message)}catch(t){console.error("取得評論列表時發生錯誤:",t)}},A=async t=>{try{const a=e.state.userInfo?.id,l=await(0,o.Ry)(t,a);if(1===l.data.code){const e=y.value.find((e=>e.id===t));e&&(e.likeCount+=1,e.liked=!0)}else console.error("按讚失敗:",l.data.message)}catch(a){console.error("按讚時發生錯誤:",a)}};return(0,l.sV)(h),(t,e)=>((0,l.uX)(),(0,l.CE)("div",c,[e[0]||(e[0]=(0,l.Lk)("hr",null,null,-1)),(0,l.Lk)("ul",u,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.value,((t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},[(0,l.Lk)("div",d,[(0,l.Lk)("div",m,[(0,l.Lk)("img",{src:"data:image/png;base64,"+t.avatar,alt:"userimg",class:"avatar-35 rounded-circle img-fluid"},null,8,k)]),(0,l.Lk)("div",v,[(0,l.Lk)("div",f,[(0,l.Lk)("h6",p,(0,n.v_)(t.authorName),1),(0,l.Lk)("span",L,(0,n.v_)((0,r.R1)(s.Yq)(t.commentDate)),1)]),(0,l.Lk)("p",g,(0,n.v_)(t.content),1),(0,l.Lk)("div",null,[(0,l.Lk)("button",{onClick:e=>A(t.id),class:"btn btn-link p-0"},[(0,l.Lk)("i",{class:(0,n.C4)(["material-symbols-outlined",{"text-primary":t.liked}])}," thumb_up ",2),(0,l.eW)(" "+(0,n.v_)(t.likeCount),1)],8,b)])])])])))),128))])]))}};const h=y;var A=h},9405:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var l=a(641),n=a(33),r=a(953),o=a(3751),s=a(9362),i=a(2281),c=a(7409),u=a(4754),d=a(6278),m=a(5909),k=a(5220),v=a(5208);const f={class:"container"},p={class:"row"},L={class:"col-sm-12"},g={class:"form-text text-muted"},b=["onClick"],y={class:"card p-3",style:{cursor:"pointer"}},h={class:"notification-list m-0 p-0"},A={class:"d-flex align-items-center justify-content-between"},C={class:"w-100"},_={class:"d-flex justify-content-between"},x={class:"ms-3"},E={class:"mb-0 text-muted"},I={class:"mb-0 d-inline-block me-2",style:{"font-size":"1.25rem","font-weight":"bold"}},w={class:"d-flex stats-row mt-2"},R={class:"stat-item"},F={class:"mt-3"},Y={class:"me-4 d-flex align-items-center"},j={class:"modal-content"},B={class:"modal-header"},K={class:"header-content d-flex justify-content-between align-items-center"},X={class:"mb-0"},S={class:"modal-body"},D={class:"modal-title"},$={class:"mb-0 d-inline-block me-2"},N={class:"mb-0 text-muted"},Q={class:"mt-3"},z={class:"me-4 d-flex align-items-center mt-4"},J={class:"comment-attagement d-flex"};var U={__name:"Notification",setup(t){function e(t,e){return t.length>e?t.slice(0,e)+"...":t}const a=(0,d.Pj)(),U=(0,k.lq)(),W=(0,r.KR)([]),q=(0,r.KR)(!1),G=(0,r.KR)({});function V(t){G.value=W.value[t],q.value=!0,document.body.style.overflow="hidden"}function P(){q.value=!1,document.body.style.overflow=""}const T=async()=>{const t=await(0,c.PG)(U.params.searchkeys);1===t.data.code?(W.value=t.data.data,console.log("search結果",W.value)):console.log("error")},O=(0,r.KR)(""),Z=async t=>{if(O.value.trim())try{const e={articleId:t.id,userId:a.state.userInfo.id,content:O.value};console.log(e);const l=await(0,u.ZT)(e);1===l.data.code?(t.commentCount++,O.value=""):console.error("發表評論失敗:",l.data.message)}catch(e){console.error("發表評論時發生錯誤:",e)}};return(0,l.sV)((()=>{T()})),(t,a)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",f,[(0,l.Lk)("div",p,[(0,l.Lk)("div",L,[a[4]||(a[4]=(0,l.Lk)("h1",{class:"card-title"},"文章搜尋",-1)),(0,l.Lk)("small",g,"搜尋關鍵字為："+(0,n.v_)((0,r.R1)(U).params.searchkeys),1)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(W.value,((t,o)=>((0,l.uX)(),(0,l.CE)("div",{class:"col-sm-12",key:o,onClick:t=>V(o)},[(0,l.Lk)("div",y,[(0,l.Lk)("div",null,[(0,l.Lk)("ul",h,[(0,l.Lk)("li",A,[a[9]||(a[9]=(0,l.Lk)("div",{class:"user-img img-fluid"},[(0,l.Lk)("img",{src:s,alt:"story-img",class:"rounded-circle avatar-40 float-right"})],-1)),(0,l.Lk)("div",C,[(0,l.Lk)("div",_,[(0,l.Lk)("div",x,[(0,l.Lk)("p",E,(0,n.v_)(t.boardName)+" • "+(0,n.v_)((0,r.R1)(v.Yq)(t.publicationDate)),1),(0,l.Lk)("h5",I,(0,n.v_)(t.title),1),(0,l.Lk)("div",w,[(0,l.Lk)("div",R,[(0,l.Lk)("p",F,(0,n.v_)(e(t.content,50)),1)])]),(0,l.Lk)("div",Y,[a[5]||(a[5]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 text-primary"}," arrow_circle_up ",-1)),a[6]||(a[6]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 text-primary"}," arrow_circle_down ",-1)),(0,l.eW)((0,n.v_)(t.likeCount+t.dislikeCount)+" ",1),a[7]||(a[7]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 ps-2 text-primary"}," mode_comment ",-1)),(0,l.eW)((0,n.v_)(t.commentCount)+" ",1),a[8]||(a[8]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 ps-2 text-primary"}," bookmark ",-1)),(0,l.eW)((0,n.v_)(t.bookmarkCount),1)])])])])])])])])],8,b)))),128))])]),q.value?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:(0,o.D$)(P,["self"])},[(0,l.Lk)("div",j,[(0,l.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=t=>P())},"X"),(0,l.Lk)("div",B,[(0,l.Lk)("div",K,[(0,l.Lk)("div",null,[a[10]||(a[10]=(0,l.Lk)("img",{src:s,alt:"story-img",class:"rounded-circle avatar-40"},null,-1)),(0,l.Lk)("p",X,(0,n.v_)(G.value.boardName),1)]),a[11]||(a[11]=(0,l.Lk)("button",{type:"button",class:"btn btn-outline-primary"},"追蹤",-1))])]),(0,l.Lk)("div",S,[(0,l.Lk)("h2",D,(0,n.v_)(G.value.title),1),(0,l.Lk)("div",null,[(0,l.Lk)("p",$,(0,n.v_)(G.value.authorName),1),(0,l.Lk)("p",N,(0,n.v_)((0,r.R1)(v.Yq)(G.value.publicationDate)),1)]),(0,l.Lk)("p",Q,(0,n.v_)(G.value.content),1),(0,l.Lk)("div",z,[a[12]||(a[12]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 text-primary"}," arrow_circle_up ",-1)),a[13]||(a[13]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 text-primary ms-2"}," arrow_circle_down ",-1)),(0,l.eW)((0,n.v_)(G.value.likeCount+G.value.dislikeCount)+" ",1),a[14]||(a[14]=(0,l.Lk)("i",{class:"material-symbols-outlined md-18 text-primary ms-4"}," bookmark ",-1)),(0,l.eW)((0,n.v_)(G.value.bookmarkCount),1)]),(0,l.bF)(m.A,{article_id:G.value.id},null,8,["article_id"])]),(0,l.Lk)("form",{class:"comment-text d-flex align-items-center comment-input",action:"javascript:void(0);",onSubmit:a[3]||(a[3]=(0,o.D$)((t=>Z(G.value)),["prevent"]))},[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control rounded",placeholder:"輸入你的留言","onUpdate:modelValue":a[1]||(a[1]=t=>O.value=t)},null,512),[[o.Jo,O.value]]),(0,l.Lk)("div",J,[(0,l.Lk)("img",{src:i,alt:"userimg",class:"me-3 img-fluid",onClick:a[2]||(a[2]=t=>Z(G.value))})])],32)])])):(0,l.Q3)("",!0)],64))}},W=a(6262);const q=(0,W.A)(U,[["__scopeId","data-v-2196900f"]]);var G=q},2281:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAT1JREFUSEu1le9twjAQxd9ZlBHYAjIEFFRVGaCZgq+doF+ZIgyAqoo/GSJ4i4xAIYfcypBUl9jBaT477+e7e/dM+OePqvqbxTFRF+jXw0T3xa0D5vkGoIKI9RMjXeyiIhQkAKwkFSBk8XaShkBkANEazG+/wmEgERDvong7z0dnYFkC4xBQI8C25es5n56JEoBHFqRKrHyN4AQYUVPNiWgGxtSCiJD5GMELYKu5g+rzGTIfmhzXCeACSY57CFAFfRMS/mmd7LiWPai73ziraR8kxw3B76ZtvQFOoA/JacEtcu3KQ4AmN/UyZJO49xgxSULrtrzyruCvsAL0AFi5EtcJ+Jwdx6XCsveokKw3YE5f9lHWJb7FCkzOtC1PMOAm4BigD6jxwQl9yW7vYvUWJvsVQbuc4XNzEdDlR9+zVx4h7BlM3pq2AAAAAElFTkSuQmCC"},9362:function(t,e,a){t.exports=a.p+"img/01.5d55bca0.jpg"}}]);
//# sourceMappingURL=9405.dec8faa8.js.map